{% extends 'raspisaniya/base.html' %}
{% load widget_tweaks %}
{% block content %}

<h2 class="mb-4">➕ Dars qo‘shish / tahrirlash</h2>

<form method="post">
    {% csrf_token %}

    <!-- Fan -->
    <div class="mb-3">
        <label class="form-label">Fan</label>
        {{ form.subject|add_class:"form-select" }}
    </div>

    <!-- O‘qituvchi toggle -->
    <div class="mb-3">
        <button type="button" class="btn btn-secondary" id="show_teachers">O‘qituvchi tanlash</button>
    </div>
    <div class="mb-3" id="teachers_div" style="display:none;">
        <label class="form-label">O‘qituvchilar (maks 2 ta)</label>
        {{ form.teachers|add_class:"form-select" }}
    </div>

    <!-- O‘quvchi toggle -->
    <div class="mb-3" id="students_button_div" style="display:none;">
        <button type="button" class="btn btn-secondary" id="show_students">O‘quvchilar tanlash</button>
    </div>
    <div class="mb-3" id="students_div" style="display:none;">
        <label class="form-label">O‘quvchilar</label>
        {{ form.students|add_class:"form-select" }}
    </div>

    <!-- Boshlanish vaqti -->
    <div class="mb-3">
        <label class="form-label">Boshlanish vaqti</label>
        {{ form.start_time|add_class:"form-control" }}
    </div>

    <!-- Muddati -->
    <div class="mb-3">
        <label class="form-label">Muddati (minut)</label>
        {{ form.duration_minutes|add_class:"form-control" }}
    </div>

    <button type="submit" class="btn btn-primary">Saqlash</button>
</form>

<script>
    const showTeachersBtn = document.getElementById("show_teachers");
    const teachersDiv = document.getElementById("teachers_div");
    const studentsBtnDiv = document.getElementById("students_button_div");
    const showStudentsBtn = document.getElementById("show_students");
    const studentsDiv = document.getElementById("students_div");

    showTeachersBtn.addEventListener("click", function() {
        teachersDiv.style.display = "block";
        studentsBtnDiv.style.display = "block";
    });

    showStudentsBtn.addEventListener("click", function() {
        studentsDiv.style.display = "block";
    });
</script>

{% endblock %}
