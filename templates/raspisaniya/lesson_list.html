{% extends 'raspisaniya/base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Darslar ro‘yxati</h2>
    <a href="{% url 'lesson_create' %}" class="btn btn-success">➕ Dars qo‘shish</a>
</div>

<table class="table table-striped table-hover">
    <thead class="table-primary">
        <tr>
            <th>#</th>
            <th>Fan</th>
            <th>O‘qituvchilar</th>
            <th>O‘quvchilar</th>
            <th>Boshlanish vaqti</th>
            <th>Muddati (min)</th>
        </tr>
    </thead>
    <tbody>
        {% for lesson in lessons %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ lesson.subject.name }}</td>
            <td>
                {% for teacher in lesson.teachers.all %}
                    {{ teacher.first_name }} {{ teacher.last_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>
                {% for student in lesson.students.all %}
                    {{ student.first_name }} {{ student.last_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>{{ lesson.start_time|date:"d-m-Y H:i" }}</td>
            <td>{{ lesson.duration_minutes }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">Hali darslar qo‘shilmagan</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
