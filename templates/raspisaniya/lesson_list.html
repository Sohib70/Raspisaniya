{% extends 'raspisaniya/base.html' %}
{% block content %}

<h2 class="mb-4">ğŸ“˜ Darslar roâ€˜yxati</h2>
<a href="{% url 'lesson_create' %}" class="btn btn-success mb-3">â• Dars qoâ€˜shish</a>

{% if lessons %}
<table class="table table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Fan</th>
            <th>Oâ€˜qituvchilar</th>
            <th>Oâ€˜quvchilar</th>
            <th>Boshlanish vaqti</th>
            <th>Muddati</th>
            <th>Amallar</th>
        </tr>
    </thead>
    <tbody>
        {% for lesson in lessons %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ lesson.subject.name }}</td>
            <td>
                {% for teacher in lesson.teachers.all %}
                    <span class="badge bg-info">{{ teacher.name }}</span>
                {% empty %}<span class="text-muted">Yoâ€˜q</span>{% endfor %}
            </td>
            <td>
                {% for student in lesson.students.all %}
                    <span class="badge bg-secondary">{{ student.first_name }} {{ student.last_name }}</span>
                {% empty %}<span class="text-muted">Yoâ€˜q</span>{% endfor %}
            </td>
            <td>{{ lesson.start_time }}</td>
            <td>{{ lesson.duration_minutes }} min</td>
            <td>
                <a href="{% url 'lesson_update' lesson.pk %}" class="btn btn-sm btn-warning">âœï¸</a>
                <a href="{% url 'lesson_delete' lesson.pk %}" class="btn btn-sm btn-danger">ğŸ—‘ï¸</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info">Hozircha darslar mavjud emas.</div>
{% endif %}

{% endblock %}
